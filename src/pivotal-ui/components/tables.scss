/*doc
---
title: Tables
name: table
categories:
  - Objects
  - All
---


Class                 | Description
--------------------- | -----------------
`.table`              | Base table class, applies spacing and cross browser support. Unfortunately inherits some undesirable styles from bootstrap.
`.table-hover`        | Adds a light blue background color to table rows when the user hovers over them (use to indicate clickability)
`.table-striped`      | Applies zebra striping to a table.

*/

/*pending
---
title: JS Tables
name: table_js
categories:
  - JavaScript
  - All
---

This section contains different table behaviors. See [tables][table] to see different table styles.
*/

// Terrible terrible code
.table-hack {
  .thead, .tbody {
    padding: 0 15px;
  }
  .th {
    padding: 8px 15px;
  }
  .td {
    padding: 20px 15px;
  }
  .tbody {

    .tr:nth-child(odd) {
    }
  }
}

/*doc
---
title: Data
name: table_data
parent: table
---

This is a table used to display many rows of data (it is pretty much the default table). You can use grid column classes on th and td elements. See key-value table for example.

Design Note: The `table-data` is often paired with `table-light` as in our example.

```haml_example

%table.table.table-data.table-light
  %thead
    %tr
      %th
        Service Instance
      %th
        Service Plan
      %th
        Bound Apps
  %tbody
    %tr
      %td
        oracle-db-sct
      %td
        Oracle DB
      %td
        12
    %tr
      %td
        oracle-db-sct
      %td
        Oracle DB
      %td
        12
    %tr
      %td
        oracle-db-sct
      %td
        Oracle DB
      %td
        12
    %tr
      %td
        oracle-db-sct
      %td
        Oracle DB
      %td
        12
```

*/

.table-data {
  border: none;
  tbody, thead, .tbody, .thead {
    tr, .tr {
      border-bottom: 1px solid $gray-7;
      th, .th {
        border-bottom: none;
        border-color: $gray-7;
        border-right: 1px solid $gray-7;
        padding: 15px 10px;
        font-size: 13px;
        font-weight: 900;
        letter-spacing: 0.3px;
        &:first-child {
          border-bottom: none;
        }
        &:last-child {
          border: none;
        }
        background-color: $gray-9;
      }
      td, .td {
        padding: 10px 10px;
        border: none; // overwriting bootstrap default values which are too specific
      }
    }
  }

  tbody, .tbody {
    tr, .tr {
      background-color: $gray-9;
      &:hover {
        -webkit-transition: background-color 300ms ease-out;
        -moz-transition: background-color 300ms ease-out;
        transition: background-color 300ms ease-out;
        background-color: $gray-10;
      }
      &:last-child {
        border-bottom: 2px solid $shadow-3;
      }
    }
  }
  // end optical illusion bug code

  > thead > tr, > .thead > .tr {
    text-transform: uppercase;
    &:last-child {
    }
    > th, > .th {
      color: $gray-3;
    }
  }

  &.table-light {
    tbody, thead, .tbody, .thead {
      tr, .tr {
        background-color: $gray-10;
        th, .th, td, .td {
          background-color: $gray-10;
        }
        td, .td {
          border: none; // overwriting bootstrap default values which are too specific
        }
      }
    }
  }
}

/*doc
---
title: Key-Value
name: table_key_value
parent: table
---

This table is used when the table headings are on the left. It looks better when you
specify column widths for the th/tds.


```haml_example

%table.table.table-key-value
  %tbody
    %tr
      %th.col-md-8 Email
      %td.col-md-16 joe@example.com
    %tr
      %th.col-md-8 Current Password
      %td.col-md-16 *******
    %tr
      %th.col-md-8 First Name
      %td.col-md-16 Joe
    %tr
      %th.col-md-8 Last Name
      %td.col-md-16 Bobs
    %tr
      %th.col-md-8 Phone
      %td.col-md-16 415-555-0000
```

*/
.table-key-value {
  table-layout: fixed;
  tbody, thead, .tbody, .thead {
    tr, .tr {
      th, .th {
        border: none; // overwriting bootstrap default values which are too specific
      }
    }
  }
  tbody {
    tr {
      &:last-child {
        border: none;
      }
      th, td {
        padding: 0;
        margin: 0;
      }
      th {
        text-transform: uppercase;
        font-weight: 800;
        text-align: left;
        color: $gray-5;
      }
      td {
        text-align: left;
        &:last-child {
          border: none;
        }
      }
    }
  }
}

/*pending
---
title: Clickable
name: table_clickable
parent: table_js
---

Use this style of table when rows are clickable. It is possible to prevent a user from clicking on a row w/ a message by adding data-prevent-click and data-prevent-click-message to the row. (N.B.: This does not actually add any sort of permissions to the URL in question).
We are making the assumption here that table-hover will *only* be used if the table is clickable, because we add a pointer.



```haml_example

%table.table.table-data.table-hover{:'data-behavior' => 'ClickableTable'}
  %thead
    %tr
      %th
        Style
      %th{colspan: 2}
        Clickability
  %tbody
    %tr{:'data-target-path' => '/styleguide#link', :'data-prevent-click' => 'true', :'data-prevent-click-message' => "YOU'VE ENTERED THE FORBIDDEN ZONE"}
      %td
        Forbidden Links
      %td
        High
      %td.txt-m.txt-r
        %i.fa.fa-chevron-right.type-primary-4
    %tr{:'data-target-path' => '/styleguide#button'}
      %td
        Buttons
      %td
        Medium
      %td.txt-m.txt-r
        %i.fa.fa-chevron-right.type-primary-4
    %tr{:'data-target-path' => '/styleguide#type'}
      %td
        Typography
      %td
        Low
      %td.txt-m.txt-r
        %i.fa.fa-chevron-right.type-primary-4
```

*/

.table-hover {
  td {
    cursor: pointer;
  }
}

/*doc
---
title: Alignment
name: table_alignment
parent: table
---

See the [alignment component][alignment] for classes to use for table text alignment.

*/

// Table alignment

/* horizontal alignment */
table .txt-c, table tr .txt-c, table tr td.txt-c {
  @extend .txt-c;
}

table .txt-l, table tr .txt-l, table tr td.txt-l {
  @extend .txt-l;
}

table .txt-r, table tr .txt-r, table tr td.txt-r {
  @extend .txt-r;
}

/* vertical alignment */
table .txt-t, table tr .txt-t, table tr td.txt-t, table tr th.txt-t {
  @extend .txt-t;
}

table .txt-b, table tr .txt-b, table tr td.txt-b, table tr th.txt-b {
  @extend .txt-b;
}

table .txt-m, table tr .txt-m, table tr td.txt-m, table tr th.txt-m {
  @extend .txt-m;
}

/*doc
---
title: React Sortable Tables
name: table_react_sortable
categories:
 - React
---

```html_example
<div id="sortable-table-react-example">
</div>
```

```js_example
$(function() {
  var columns = [
    {
      name: 'name',
      title: 'Name'
    },
    {
      name: 'instances',
      title: 'Instances'
    },
    {
      name: 'cpu',
      title: 'CPU'
    },
    {
      name: 'synergy',
      title: 'Synergy'
    }
  ]

  var data = [
    {
      instances: '1',
      name: 'foo',
      cpu: 'po',
      synergy: 'qum',
      ram: 'bee',
    },
    {
      name: 'yee',
      instances: 'di',
      cpu: 'no',
      synergy: 'aum'
    },
    {
      name: 'zee',
      instances: 'si',
      cpu: 'mo',
      synergy: 'wum'
    },
    {
      name: 'jee',
      instances: 'ui',
      cpu: 'no',
      synergy: 'mum'
    }
  ];

  React.renderComponent(
    TableSortable({
      data: data,
      columns: columns
    }),
    document.getElementById('sortable-table-react-example')
  );
});
```

*/



/*pending
---
title: Angular Sortable Table
name: table_angular_sortable
parent: table_js
---

USE:

1. Add a sorter in your controller scope that has a reference to the collection you want to sort.
2. Add "sortable" to any header/element which should trigger a sort (if the sortable directive doesn't do what you want, write a new one or just use ng-click. Please don't add more behavior to the current sortable).

```haml_example

%table.table.table-data.table-sortable{"ng-controller" => "ExampleSpaceDataTableCtrl", "ng-cloak" => true}
  %thead
    %tr
      %th.txt-m{"sortable" => "name"} Name
      %th{sortable: 'totalApps'} Total Apps
      %th{sortable: 'runningApps'} Running Apps
      %th{sortable: 'stoppedApps'} Stopped Apps
      %th{sortable: 'downApps'} Down Apps
      %th.txt-m{sortable: 'serviceInstances'} Service Instances
      %th.txt-m{sortable: 'quota'} Quota
  %tbody
    %tr{"ng-repeat" => "tableItem in tableItems"}
      %td {{tableItem.name}}
      %td {{tableItem.totalApps}}
      %td {{tableItem.runningApps}}
      %td {{tableItem.stoppedApps}}
      %td {{tableItem.downApps}}
      %td {{tableItem.serviceInstances}}
      %td {{tableItem.quota}}
```
*/
.table-sortable {
  th.sorted-desc {
    color: $navy-1;
    &:after {
      content: "\f0d7";
      color: $navy-1;
    }
  }

  .sortable, [sortable] { // latter selector is angular only
    cursor: pointer;
    &:after {
      margin-left: 4px;
      content: "";
      font-weight: 200;
      font-family: FontAwesome;
    }
    &:hover {
      background-color: white;
      -webkit-transition: background-color 300ms ease-out;
      -moz-transition: background-color 300ms ease-out;
      transition: background-color 300ms ease-out;
    }
  }

  th.sorted-none {
    &:hover:after {
      visibility: visible;
    }
    &:after {
      content: "\f0dc";
      color: $gray-7;
      visibility: hidden;
    }
  }

  th.sorted-asc {
    color: $navy-1;
    &:after {
      content: "\f0d8";
      color: $navy-1;
    }
  }
}

/*pending
---
title: Inline Addable
name: table_inline_addable
parent: table_js
---

```haml_example
%div{"ng-controller" => "StyleguideAddableTableCtrl", 'ng-class' => '{editing: spaceTable.editing}', 'ng-cloak' => 'true'}
  %p.txt-r
    %a.btn.btn-default.state-adding-trigger{'ng-click' => 'spaceTable.enterEditMode()', href: "javascript:void(0);", "ng-disabled" => "spaceTable.newModel.saving"}
      Add a Space
  %table.table.table-data.table-addable
    %thead.thead-state-viewing
      %tr
        %th.txt-m.col-md-8
          Name
        %th.txt-m
          Total Apps
        %th.txt-m
          Running Apps
        %th.txt-m
          Stopped Apps
        %th.txt-m
          Down Apps
        %th.txt-m
          Service Instance
        %th.txt-m
          Quota
        %th.txt-m
    %thead.state-editing-show
      %tr
        %th.txt-m
          Name
    %tbody
      %tr.state-editing-show
        %td
          %form.td-state-adding.form-inline{'ng-submit' => 'spaceTable.save()', 'name' => 'newSpaceForm'}
            .form-group.mll
              %input.form-control{'ng-model' => 'spaceTable.newModel.name',
              'name' => 'name',
              type: 'text',
              autofocus: 'autofocus',
              'invalid-invalid' => 'true',
              required: 'true',
              'ng-minlength' => 3,
              'aria-describedby' => "space-name-error"}
            .form-group
              %button.btn.btn-default{'type' => 'submit', 'ng-disabled' => '!spaceTable.newModel.name'} Add
              %a.btn.btn-default{'ng-click' => 'spaceTable.cancel()'} Cancel

            #space-name-error.error-container.pal{"ng-show" => "newSpaceForm.name.$dirty && newSpaceForm.name.$invalid", role: 'alert'}
              %span.error{"ng-show" => "newSpaceForm.name.$error.required"} Space name is required.
              %span.error{"ng-show" => "newSpaceForm.name.$error.minlength"} Space name is required to be at least 3 characters.
              %span.error{"ng-show" => "newSpaceForm.name.$error.invalidInvalid"} Space name cannot be invalid, literally.
              %div{'ng-repeat' => 'error in spaceTable.newModel.serverErrors'}
                %span.error {{error}}

      %tr.inline-table-item{'ng-repeat' => "space in spaceTable.collection.items"}
        %td.pls.type-ellipsis-1-line{'ng-class' => '{saveRequested: space.saving}'}
          .fa.fa-check.fa-check-success.ng-hide{'ng-show' => 'space.freshlySaved'}
          {{space.name}}
        %td {{space.totalApps}}
        %td {{space.runningApps}}
        %td {{space.stoppedApps}}
        %td {{space.downApps}}
        %td {{space.serviceInstances}}
        %td {{space.quota}}
        %td{ "data-confirmation-modal" => 'Are you sure you want to delete this space?',
                  'data-confirmation-action' => 'spaceTable.destroy(space)',
                  'data-confirmation-header' => 'Delete Space',
                  'data-dangerous-action' => "true"} Delete
```
*/

.editing {
  .state-adding-trigger {
    visibility: hidden;
  }
  .table-addable {
    .thead-state-viewing,
    .td-state-viewing {
      display: none;
    }

    td {
      display: none;
    }
    td:first-child {
      display: table-cell;
    }
    thead.state-editing-show {
      display: table-header-group;
    }
    tr.state-editing-show {
      display: table-row;
    }
  }
}

.table-addable {
  table-layout: fixed;

  .state-editing-show {
    display: none;
  }

  .state-adding-item-show {
    display: none;
  }

  .inline-table-item.ng-enter.ng-enter-active {
    opacity: 1;
    .addedConfirmation {
      display: table-cell;
    }
  }

  .inline-table-item {
    .addedConfirmation {
      color: forestgreen;
    }
  }

  .fa-check-success {
    color: $teal-3;
    font-size: 12px;
    margin-right: 5px;

    -webkit-transition: opacity 300ms ease-out;
    -moz-transition: opacity 300ms ease-out;
    transition: opacity 300ms ease-out;

    opacity: 1;
  }

  .fa-check-success.ng-hide {
    display: inline-block !important;
    opacity: 0;
  }

  .saveRequested {
    opacity: 0.3;
  }

  .deleteRequested {
    -webkit-transition: all ease-out .2s;
    transition: all ease-out .2s;
    color: $gray-5;
  }

  .ng-leave {
    -webkit-transition: all ease-out .5s;
    transition: all ease-out .5s;
  }

  .ng-leave.ng-leave-active {
    color: $gray-9;
  }

  .saved {
    opacity: 1;
    -webkit-transition: all 300ms ease-out;
    -moz-transition: all 300ms ease-out;
    transition: all 300ms ease-out;
  }

}

//
//.ng-valid {
//  @extend .has-success;
//}

/*pending
---
title: Kitchen Sink
name: table_kitchen_sink
parent: table_js
---

Example of composed behaviors that operate on the same table.

```haml_example
%div{"ng-controller" => "StyleguideKitchenSinkTableCtrl", 'ng-class' => '{editing: spaceTable.editing}', 'ng-cloak' => 'true'}
  %p.txt-r
    %a.btn.btn-default.state-adding-trigger{'ng-click' => 'spaceTable.enterEditMode()', href: "javascript:void(0);", "ng-disabled" => "spaceTable.newModel.saving"}
      Add a Space
  %table.table.table-data.table-sortable.table-addable
    %thead.thead-state-viewing
      %tr
        %th.txt-m{sortable: "name"} Name
        %th{sortable: 'totalApps'} Total Apps
        %th{sortable: 'runningApps'} Running Apps
        %th{sortable: 'stoppedApps'} Stopped Apps
        %th{sortable: 'downApps'} Down Apps
        %th.txt-m{sortable: 'serviceInstances'} Service Instances
        %th.txt-m{sortable: 'quota'} Quota
    %thead.state-editing-show
      %tr
        %th.txt-m
          Name
    %tbody
      %tr.state-editing-show
        %td
          %form.td-state-adding.form-inline{'ng-submit' => 'spaceTable.save()', 'name' => 'newSpaceForm'}
            .form-group.mll
              %input.form-control{'ng-model' => 'spaceTable.newModel.name',
              'name' => 'name',
              type: 'text',
              autofocus: 'autofocus',
              'invalid-invalid' => 'true',
              required: 'true',
              'ng-minlength' => 3,
              'aria-describedby' => "space-name-error"}
            .form-group
              %button.btn.btn-default{'type' => 'submit', 'ng-disabled' => '!spaceTable.newModel.name'} Add
              %a.btn.btn-default{'ng-click' => 'spaceTable.cancel()'} Cancel

            #space-name-error.error-container.pal{"ng-show" => "newSpaceForm.name.$dirty && newSpaceForm.name.$invalid", role: 'alert'}
              %span.error{"ng-show" => "newSpaceForm.name.$error.required"} Space name is required.
              %span.error{"ng-show" => "newSpaceForm.name.$error.minlength"} Space name is required to be at least 3 characters.
              %span.error{"ng-show" => "newSpaceForm.name.$error.invalidInvalid"} Space name cannot be invalid, literally.
              %div{'ng-repeat' => 'error in spaceTable.newModel.serverErrors'}
                %span.error {{error}}

      %tr{"ng-repeat" => "space in spaceTable.collection.items"}
        %td.pls.type-ellipsis-1-line{'ng-class' => '{saveRequested: space.saving}'}
          .fa.fa-check.fa-check-success.ng-hide{'ng-show' => 'space.freshlySaved'}
          {{space.name}}
        %td {{space.totalApps}}
        %td {{space.runningApps}}
        %td {{space.stoppedApps}}
        %td {{space.downApps}}
        %td {{space.serviceInstances}}
        %td {{space.quota}}
```
*/

/*doc
---
title: Scrollable
name: scrollable_table
parent: table
---

Table with borders where the contents of the table scroll but the header does not.
The default height of the scrollable table is 183px. There are four other sizes provided
which you can use by adding the following classes to the `.table-scrollable` element.

Table Scrollable sizes | Height
---------------------- | ---------
default                | 183px
`.table-scrollable-sm` | 300px
`.table-scrollable-md` | 600px
`.table-scrollable-lg` | 900px

If you would like a custom size, please add an inline style to the `.table-scrollable-body` element.

Design Note: The `table-scrollable` is often paired with `table-data` and `table-light` as in our example.

<div class="alert alert-info alert-dismissable">
  <p class="em-high">
    You will need to specify the width of <strong>every</strong> column in both the <code>thead</code> and
    the first row of the <code>tbody</code>. You can do this with inline width attributes.
  </p>
</div>

```html_example
<div class="table-scrollable table-scrollable-sm">
  <div class="table-scrollable-header">
    <table class="table table-data table-light">
      <thead>
        <tr>
          <th width="10%">#</th>
          <th width="16%">Status</th>
          <th width="12%">CPU</th>
          <th width="16%">Memory</th>
          <th width="16%">Disk</th>
          <th width="30%">Uptime</th>
        </tr>
      </thead>
    </table>
  </div>
  <div class="table-scrollable-body">
    <table class="table table-data table-light">
      <tbody>
        <tr>
          <td width="10%">0</td>
          <td width="16%">Running</td>
          <td width="12%">0%</td>
          <td width="16%">4.16 MB</td>
          <td width="16%">6.75 MB</td>
          <td width="30%">27 min</td>
        </tr>
        <tr>
          <td>1</td>
          <td>Running</td>
          <td>0%</td>
          <td>4.07 MB</td>
          <td>6.75 MB</td>
          <td>27 min</td>
        </tr>
        <tr>
          <td>2</td>
          <td>Running</td>
          <td>0%</td>
          <td>4.07 MB</td>
          <td>6.75 MB</td>
          <td>25 min</td>
        </tr>
        <tr>
          <td>3</td>
          <td>Running</td>
          <td>0%</td>
          <td>4.14 MB</td>
          <td>6.75 MB</td>
          <td>25 min</td>
        </tr>
        <tr>
          <td>4</td>
          <td>Running</td>
          <td>0%</td>
          <td>4.08 MB</td>
          <td>6.75 MB</td>
          <td>25 min</td>
        </tr>
        <tr>
          <td>5</td>
          <td>Running</td>
          <td>0%</td>
          <td>4.16 MB</td>
          <td>6.75 MB</td>
          <td>25 min</td>
        </tr>
        <tr>
          <td>6</td>
          <td>Running</td>
          <td>0%</td>
          <td>4.07 MB</td>
          <td>6.75 MB</td>
          <td>25 min</td>
        </tr>
        <tr>
          <td>7</td>
          <td>Running</td>
          <td>0%</td>
          <td>4.07 MB</td>
          <td>6.75 MB</td>
          <td>25 min</td>
        </tr>
        <tr>
          <td>8</td>
          <td>Running</td>
          <td>0%</td>
          <td>4.03 MB</td>
          <td>6.75 MB</td>
          <td>25 min</td>
        </tr>
        <tr>
          <td>9</td>
          <td>Running</td>
          <td>0%</td>
          <td>4.07 MB</td>
          <td>6.75 MB</td>
          <td>25 min</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
```
*/

.table-scrollable {
  border: $table-scrollable-border;

  table {
    table-layout: fixed;
    tr:last-child {
      border-bottom: none;
    }
  }

  .table {
    margin: 0;
  }

  .table-scrollable-header {
    border-bottom: $table-scrollable-header-border;
  }

  .table-scrollable-body {
    border-top: $table-scrollable-body-border;
    max-height: $table-scrollable-default-height;
    overflow-y: auto;
    overflow-x: hidden;
  }

  &.table-scrollable-sm {
    .table-scrollable-body {
      max-height: $table-scrollable-sm;
    }
  }
  &.table-scrollable-md {
    .table-scrollable-body {
      max-height: $table-scrollable-md;
    }
  }
  &.table-scrollable-lg {
    .table-scrollable-body {
      max-height: $table-scrollable-lg;
    }
  }
}

